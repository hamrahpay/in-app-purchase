## پیشنهاد میگردد از کتابخانه جدید استفاده نمایید 
[کتابخانه جدید](https://github.com/hamrahpay/HamrahPay)



کتابخانه پرداخت درون برنامه ای همراه پی
===================


محیط برنامه نویسی : Android Studio
تغییرات این نسخه
----------

 1. آسان شدن روند پرداخت درون برنامه ای و استفاده فقط 1 خط کد نویسی
 2. پرداخت به ازای هر دستگاه (برای هر نصب باید مبلغ پرداخت شود)
 3. پرداخت به ازای ایمیل ( همانند گوگل پلی به ازای هر خرید میتوان روی 2 دستگاه نصب کرد )
 4. امکان فروش چندین کالا در یک برنامه به سادگی
 5. عدم دریافت ایمیل هنگان خرید از مشتریان
 4. رفع اشکالات جزئی

دانلود کتابخانه
---------------
ابتدا وارد [این صفحه](https://github.com/hamrahpay/in-app-purchase/releases) شوید. و آخرین ورژن سورس کد را دانلود نمایید.
مستندات
-------------

در ابتدا فایل دانلود شده را از حالت فشرده خارج کنید 
در محیط اندروید استودیو از منوی File -> new -> Import Module را انتخاب نمایید.
در صفحه باز شده مسیر سورس کد همراه پی را انتخاب نمایید و در بخش Module name نام :hamrahpay را وارد نمایید.

در فایل build.gradle مربوط به app کد زیر را وارد نمایید
در بخش dependencies 
```
    compile project(':hamrahpay')
```
در نهایت 
```
    dependencies {
	    compile project(':hamrahpay')
    }

```
در مرحله آخر در هر کلاسی که میخواهید دکمه پرداخت را قرار دهید کد زیر را وارد نمایید
```
    import ir.devage.hamrahpay.Hamrahpay;

```
با این کتابخانه را به آن کلاس اضافه کرده اید و حال در کد کلیک هر دکمه ای برای پرداخت در نظر گرفته اید میتوانید کد زیر را وارید نمایید
```
    Hamrahpay.Pay(MainActivity.this,"شناسه کالا");
```


> **توجه:**

> - MainActivity.this را با نام اکتویتی خود جایگزین نمایید
> - شناسه کالا همان شناسه ای است که در پنل همراه پی در بخش کالا ها دریافت مینمایید . مثلا :‌hp_5416d2e3a5f75560925755


#### <i class="icon-file"></i> توابع کتابخانه همراه پی

#### چک کردن وضعیت پرداخت
```
> Hamrahpay.isPremium(getApplicationContext(),"شناسه کالا")
```
شرح :‌این تابع چک میکند که آیا یک کالایی در نرم افزار شما خریداری شده است یا خیر

نوع بازگشتی :‌boolean

ورودی ها :‌ 
 1. context
 2. sku : شناسه کالا از نوع String
مثال :‌
```
if (Hamrahpay.isPremium(getBaseContext(),"hp_.."))
{
    //---------
}
```
 

#### تابع پرداخت 
```
>  Hamrahpay.Pay(MainActivity.this,sku);
```
شرح :‌ برای پرداخت استفاده میشود . هنگامی که این تابع فراخوانی میگردد صفحه پرداخت نمایش داده میشود .

ورودی ها :‌

 

 1. context از نوع Activity
 2. شناسه کالا از نوع String

به مخض فراخوانی این تابع صفحه پرداخت نمایش داده میشود .

#### <i class="icon-file"></i> پیکربندی نوع پرداخت 
دو نوع پرداخت در همراه پی پشتیبانی میگردد

 1. پرداخت به ازای هر دستگاه :‌با این نوع پرداخت هر فردی که نرم افزار را خریداری میکند فقط بر روی همان دستگاهی که خریداری کرده است میتواند از نرم افزار استفاده نماید و پرداخت برای همان دستگاه قابل شناسایی میباشد.
 2. پرداخت به ازای ایمیل :‌ در این نوع پرداخت مکانیزمی طراحی شده است که هر فردی که نرم افزار را خریداری میکند بتواند بر روی گوشی دیگری هم نصب کنم . به طور مثال با یک بار نرم افزار شما را روی گوشی و تبلت خود نصب نماید. این روش توسط گوگل پلی و دیگر مارکت ها استفاده میگردد.

برای انتخاب نوع پرداخت در ماژول همراه پی فایل strings.xml را باز کرده و مقدار زیر را تغییر دهید
```
‍‍<string name="verification_type">type</string>
```
به جای type میتوانید از email_verification یا device_verification استفاده نمایید.



----------

[TOC]



### پشتیبانی

[![](https://hamrahpay.com/assets/home/theme/img/logo-red.png)](https://hamrahpay.com)

 هرگونه سوالی در رابطه با این کتابخانه را از بخش تیکت ها در پنل خود در سایت ما مطرح نمایید.
 
